<div *ngIf="!formulario">
  <mat-stepper orientation="vertical" [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <ng-template matStepLabel>{{ 'legalizacion_matricula.liquidacion_recibos' | translate }}</ng-template>

      <mat-card>
        <mat-card-header>
          <mat-card-title>{{ 'legalizacion_matricula.informacion_proyecto' | translate }}</mat-card-title>
        </mat-card-header>

        <br><br>

        <mat-card-content>
          <form class="form-container">
            <div>
              <mat-card-subtitle>{{ 'legalizacion_matricula.facultad' | translate }}</mat-card-subtitle>
              <mat-form-field [formGroup]="firstFormGroup">
                <mat-label>{{ 'legalizacion_matricula.seleccion_facultad' | translate }}</mat-label>
                <mat-select formControlName="validatorFacultad" required (selectionChange)="onFacultadChange($event)">
                  <mat-option *ngFor="let facultad of facultades" [value]="facultad.Id">{{facultad.Nombre}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div>
              <mat-card-subtitle>{{ 'legalizacion_matricula.proyecto_curricular' | translate }}</mat-card-subtitle>
              <mat-form-field [formGroup]="firstFormGroup">
                <mat-label>{{ 'legalizacion_matricula.seleccion_proyecto' | translate }}</mat-label>
                <mat-select formControlName="validatorProyecto" required>
                  <mat-option *ngFor="let proyecto of proyectosCurriculares" [value]="proyecto.Id">{{proyecto.Nombre}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div>
              <mat-card-subtitle>{{ 'legalizacion_matricula.anno' | translate }}</mat-card-subtitle>
              <mat-form-field [formGroup]="firstFormGroup">
                <mat-label>{{ 'legalizacion_matricula.seleccion_anno' | translate }}</mat-label>
                <mat-select formControlName="validatorAÃ±o" required>
                  <mat-option *ngFor="let anio of anios" [value]="anio.Id">{{anio.Nombre}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <div>
              <mat-card-subtitle>{{ 'legalizacion_matricula.periodo' | translate }}</mat-card-subtitle>
              <mat-form-field [formGroup]="firstFormGroup">
                <mat-label>{{ 'legalizacion_matricula.seleccion_periodo' | translate }}</mat-label>
                <mat-select formControlName="validatorPeriodo" required>
                  <mat-option *ngFor="let periodo of periodos" [value]="periodo.Id">{{periodo.Nombre}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </form>

        <div class="button-stepper">
          <button mat-stroked-button matStepperNext class="btn boton-primary" (click)="generarBusqueda(stepper)">{{ 'legalizacion_matricula.consultar' | translate }}</button>
        </div>

        </mat-card-content>
      </mat-card>

    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
      <ng-template matStepLabel>{{ 'legalizacion_matricula.tabla_resumen' | translate }}</ng-template>

        <mat-card>
          <mat-card-content>
            <div class="table-container" style="overflow-x: auto;">
              <table mat-table [dataSource]="personaDataSource" class="mat-elevation-z8 scrollable-table">

                <ng-container matColumnDef="Orden">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.orden' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.orden}} </td>
                </ng-container>

                <ng-container matColumnDef="Credencial">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.credencial' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.credencial}} </td>
                </ng-container>

                <ng-container matColumnDef="Nombres">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.nombres' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.nombres}} </td>
                </ng-container>

                <ng-container matColumnDef="Apellidos">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.apellidos' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.apellidos}} </td>
                </ng-container>

                <ng-container matColumnDef="TipoDocumento">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.tipo_doc' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.tipo_documento}} </td>
                </ng-container>

                <ng-container matColumnDef="Documento">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.documento' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.documento}} </td>
                </ng-container>

                <ng-container matColumnDef="EstadoAdmision">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.estado_admision' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.estado_admision}} </td>
                </ng-container>

                <ng-container matColumnDef="EstadoRevision">
                  <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.estado_revision' | translate }}</th>
                  <td mat-cell *matCellDef="let row"> {{row.estado_revision}} </td>
                </ng-container>

                <!-- Acciones Column -->
                <ng-container matColumnDef="Acciones">
                  <th mat-header-cell *matHeaderCellDef class="border-right">{{ 'legalizacion_matricula.acciones' | translate }}</th>
                  <td mat-cell *matCellDef="let row" class="border-right ">
                    <div class="action-container">
                      <button mat-icon-button (click)="editar(row)">
                        <mat-icon>edit</mat-icon>
                      </button>
                    </div>
                  </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="personaColums"></tr>
                <tr mat-row *matRowDef="let row; columns: personaColums"></tr>


              </table>
            </div>

            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>


            <div class="button-container">
              <div class="button-stepper">
                <button mat-stroked-button class="btn boton-primary">{{ 'legalizacion_matricula.guardar' | translate }}</button>
              </div>
            </div>


          </mat-card-content>
        </mat-card>

    </mat-step>
  </mat-stepper>
</div>

<div *ngIf="formulario">
  <mat-card>
    <mat-card-header class="flex">
      <mat-card-title>{{ 'legalizacion_matricula.legalizacion' | translate }}</mat-card-title>
      <div class="row">
        <div class="col-md-1" align="right">
          <button class="btn btn-danger btn-icon input-group-text btn-tn" (click)="cerrar()">X</button>
        </div>
      </div>
    </mat-card-header>

    <br><br>

    <mat-card-content>
        <mat-card>
          <mat-card-header>
            <mat-card-title>{{ 'legalizacion_matricula.Informacion_personal' | translate }}</mat-card-title>
          </mat-card-header>
          <br><br>
          <mat-card>
            <mat-card-header>
              <mat-card-subtitle>{{ 'legalizacion_matricula.proyecto' | translate }}</mat-card-subtitle>
            </mat-card-header>
            <br><br>
            <mat-card-content>
              <div class="flex-container">
                <mat-card class="card-id">
                  <div class="flex-container">
                    <p>{{ 'legalizacion_matricula.opcion' | translate }}</p>
                    <p>{{proyecto.opcion}}</p>
                  </div>
                </mat-card>
                <mat-card class="card-nombre">
                  <div class="flex-container">
                    <p>{{ 'legalizacion_matricula.nombre' | translate }}</p>
                    <p>{{aspirante.proyecto_admitido}}</p>
                  </div>
                </mat-card>
              </div>
            </mat-card-content>
          </mat-card>
          <br><br>
          <mat-card>
            <table mat-table [dataSource]="infoAspiranteDataSource">
              <ng-container matColumnDef="TipoIdentificacion">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.tipo_id' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.tipo_documento}} </td>
              </ng-container>

              <ng-container matColumnDef="NumeroIdentificacion">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.numero_id' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.documento}} </td>
              </ng-container>

              <ng-container matColumnDef="PrimerNombre">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.primer_nombre' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.primer_nombre}} </td>
              </ng-container>

              <ng-container matColumnDef="SegundoNombre">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.segundo_nombre' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.segundo_nombre}} </td>
              </ng-container>

              <ng-container matColumnDef="PrimerApellido">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.primer_apellido' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.primer_apellido}} </td>
              </ng-container>

              <ng-container matColumnDef="SegundoApellido">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.segundo_apellido' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.segundo_apellido}} </td>
              </ng-container>
            
              <!-- Filas -->
              <tr mat-header-row *matHeaderRowDef="infoPersonal1"></tr>
              <tr mat-row *matRowDef="let row; columns: infoPersonal1;"></tr>
            </table>
          </mat-card>
          <br><br>
          <mat-card>
            <table mat-table [dataSource]="infoAspiranteDataSource">

              <ng-container matColumnDef="FechaNacimiento">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.fecha_nacimiento' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.fecha_nacimiento}} </td>
              </ng-container>

              <ng-container matColumnDef="Numero">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.numero_cel' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.numero_celular}} </td>
              </ng-container>

              <ng-container matColumnDef="Correo">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.correo' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.correo}} </td>
              </ng-container>

              <ng-container matColumnDef="Genero">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.genero' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.genero}} </td>
              </ng-container>

              <!-- Filas -->
              <tr mat-header-row *matHeaderRowDef="infoPersonal2"></tr>
              <tr mat-row *matRowDef="let row; columns: infoPersonal2;"></tr>
            </table>
          </mat-card>

        </mat-card>

        <br><br>
        <mat-card>
          <mat-card-header>
            <mat-card-title>{{ 'legalizacion_matricula.informacion_socio' | translate }}</mat-card-title>
          </mat-card-header>
          <br><br>
          <mat-card-content>
            <table mat-table [dataSource]="dataSource2">

              <ng-container matColumnDef="Orden">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.orden' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Orden}} </td>
              </ng-container>

              <ng-container matColumnDef="Concepto">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.concepto' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Concepto}} </td>
              </ng-container>

              <ng-container matColumnDef="Informacion">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.informacion' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Informacion}} </td>
              </ng-container>

              <ng-container matColumnDef="Soporte">
                <th mat-header-cell *matHeaderCellDef class="border-right">{{ 'legalizacion_matricula.soporte' | translate }}</th>
                <td mat-cell *matCellDef="let row" class="border-right ">
                  <div class="action-container">
                    <button mat-icon-button (click)="openModal(row)">
                      <mat-icon>edit</mat-icon>
                    </button>
                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="Estado">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.estado' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Estado}} </td>
              </ng-container>
            
              <!-- Filas -->
              <tr mat-header-row *matHeaderRowDef="columns2"></tr>
              <tr mat-row *matRowDef="let row; columns: columns2;"></tr>
            </table>
          </mat-card-content>
          
        </mat-card>

        <br><br>
        <mat-card>
          <mat-card-header>
            <mat-card-title>{{ 'legalizacion_matricula.informacion_socio_cost' | translate }}</mat-card-title>
          </mat-card-header>
          <br><br>
          <mat-card-content>
            <table mat-table [dataSource]="dataSource3">

              <ng-container matColumnDef="Orden">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.orden' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Orden}} </td>
              </ng-container>

              <ng-container matColumnDef="Concepto">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.concepto' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Concepto}} </td>
              </ng-container>

              <ng-container matColumnDef="Informacion">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.informacion' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Informacion}} </td>
              </ng-container>

              <ng-container matColumnDef="Soporte">
                <th mat-header-cell *matHeaderCellDef class="border-right">{{ 'legalizacion_matricula.soporte' | translate }}</th>
                <td mat-cell *matCellDef="let row" class="border-right ">
                  <div class="action-container">
                    <button mat-icon-button (click)="openModal(row)">
                      <mat-icon>edit</mat-icon>
                    </button>
                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="Estado">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.estado' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Estado}} </td>
              </ng-container>
            
              <!-- Filas -->
              <tr mat-header-row *matHeaderRowDef="columns2"></tr>
              <tr mat-row *matRowDef="let row; columns: columns2;"></tr>
            </table>
          </mat-card-content>
            
        </mat-card>

        <br><br>
        <mat-card>
          <mat-card-header>
            <mat-card-title>{{ 'legalizacion_matricula.resumen' | translate }}</mat-card-title>
          </mat-card-header>
          <br><br>
          <mat-card-content>
            <table mat-table [dataSource]="dataSource4">

              <ng-container matColumnDef="Orden">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.orden' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Orden}} </td>
              </ng-container>

              <ng-container matColumnDef="Concepto">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.concepto' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Concepto}} </td>
              </ng-container>

              <ng-container matColumnDef="Informacion">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.informacion' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Informacion}} </td>
              </ng-container>

              <ng-container matColumnDef="Soporte">
                <th mat-header-cell *matHeaderCellDef class="border-right">{{ 'legalizacion_matricula.soporte' | translate }}</th>
                <td mat-cell *matCellDef="let row" class="border-right ">
                  <div class="action-container">
                    <button mat-icon-button (click)="openModal(row)">
                      <mat-icon>edit</mat-icon>
                    </button>
                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="Estado">
                <th mat-header-cell *matHeaderCellDef class="subHeaders">{{ 'legalizacion_matricula.estado' | translate }}</th>
                <td mat-cell *matCellDef="let row"> {{row.columns2.Estado}} </td>
              </ng-container>
            
              <!-- Filas -->
              <tr mat-header-row *matHeaderRowDef="columns2"></tr>
              <tr mat-row *matRowDef="let row; columns: columns2;"></tr>
            </table>
          </mat-card-content>
        </mat-card>

    </mat-card-content>
  </mat-card>
</div>